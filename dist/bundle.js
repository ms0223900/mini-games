!function(e){function t(t){for(var i,a,s=t[0],c=t[1],l=t[2],h=0,f=[];h<s.length;h++)a=s[h],o[a]&&f.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(u&&u(t);f.length;)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={0:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([18,1]),n()}([,function(e,t,n){e.exports=n.p+"c4b26e456038dc44ce876b69933d354f.png"},function(e,t,n){e.exports=n.p+"375bb34497d74114ba53eb192626a5c1.png"},function(e,t,n){e.exports=n.p+"27044119426d6bd705ad7eea4bdb0dfb.png"},function(e,t,n){e.exports=n.p+"de5168f03f48a202044e8d8a314862d2.png"},,,function(e,t,n){e.exports=n.p+"8b44e1071d676fc34d6d8eebb2c3de8a.png"},function(e,t,n){e.exports=n.p+"18a4562479ff15b04f37f84e6adf096a.png"},function(e,t,n){e.exports=n.p+"47d2c31d45f9df892542c9ff29a065db.png"},function(e,t,n){e.exports=n.p+"3f6998d9b661f815752e68e7bd21368b.png"},function(e,t,n){e.exports=n.p+"d36eaa48b45238a14db6171b6c627040.png"},function(e,t,n){e.exports=n.p+"7f456bd9c98b570634e03084b37c93e5.png"},function(e,t,n){e.exports=n.p+"645d57ee3816071ab7a111c0dc94372e.png"},function(e,t,n){e.exports=n.p+"ee4f5b18c6ac8a32245fd5369a27fcf7.png"},function(e,t,n){e.exports=n.p+"ff5af1b4a83d2ce97fc06c2636cc86b7.png"},function(e,t,n){e.exports=n.p+"b01b4812cbcbb3bced0cd07a8ee547a6.png"},function(e,t,n){e.exports=n.p+"a33dc17ce43ab6cbce279eb842d94832.png"},function(e,t,n){e.exports=n(30)},,,,,,function(e,t,n){e.exports=n.p+"04a5dfc99e66a301aed023ec1479691a.png"},function(e,t,n){var i=n(26);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(28)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(27)(!1)).push([e.i,"img{display:inline-block;width:100%}#UI{position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;width:300px;height:300px;padding:10px;background-color:#fff;box-shadow:0px 0px 10px #aaa}#UI .ui-container .image-container{display:inline-block;width:100px;padding:10px;box-sizing:border-box;transition:.2s}#UI .ui-container .image-container:hover{background-color:#ddd;transition:.2s}#UI .ui-container .image-container img{height:100%}#gameOver{position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;width:300px;max-height:200px;background-color:#fff;box-shadow:0px 0px 10px #aaa;text-align:center;border-radius:10px}#controlPanel{position:absolute;top:900px;left:0;right:0;bottom:0;margin:auto;width:100%;height:200px;display:flex;justify-content:space-around}#controlPanel button{position:absolute;margin:auto;width:80px;height:80px;background-color:#fff;border-radius:10px;box-shadow:0px 6px 10px #aaa}#controlPanel #dPad{position:relative;outline:1px solid #a0a;width:60%}#controlPanel #dPad #dPadUp{top:0;left:0;right:0}#controlPanel #dPad #dPadRight{top:0;bottom:0;right:0}#controlPanel #dPad #dPadLeft{top:0;bottom:0;left:0}#controlPanel #dPad #dPadDown{left:0;right:0;bottom:0}#controlPanel #buttons{position:relative;width:200px}#controlPanel #buttons #attackBTN{width:100px;height:100px;top:0;bottom:0;right:0;left:0}\n",""])},,,,function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=n(6),a=n.n(r),s=function(e){return{level:e+1,enemyAmount:10+5*e,enemyPercent:.7-.1*e<=.33?[.33,.33,.33]:[.7-.1*e,.2+.075*e,.1+.025*e]}},c=["https://cdn1.iconfinder.com/data/icons/ui-colored-2-of-3/100/UI_2__23-512.png","https://image.shutterstock.com/image-vector/weapon-focus-plus-sign-denoting-600w-1151810723.jpg","https://cdn4.iconfinder.com/data/icons/cyber-security-part-1/46/shield_add_security-512.png"],l=1e3,u={width:960,height:540};function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=function(e){var t=e.spec,n=t.x,i=t.y,o=t.w;return{t:i,l:n,b:i+t.h,r:n+o}},d=function(e,t){var n=f(e),i=f(t),o=n.l>i.l,r=n.r<i.r,a=n.t>i.t,s=n.b<i.b;if(o&&r&&a&&s)return!1;var c=[];return o&&r||(c=[].concat(h(c),["xAxis"])),a&&s||(c=[].concat(h(c),["yAxis"])),c},m=function(e,t){var n=f(e),i=n.t,o=n.l,r=n.b,a=n.r,s=f(t),c=s.t,l=s.l,u=s.b;if(!(o>s.r||a<l||r<c||i>u))return!0},v=function(e,t){var n=[t.x+t.width/2-(e.x+e.width/2),t.y+t.height/2-(e.y+e.height/2)],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/i,n[1]/i]},p=function(e,t,n){var i=n*v(e,t)[0],o=n*v(e,t)[1];return{vx:i,vy:o,deg:180+180*Math.asin(-o/Math.sqrt(i*i+o*o))/Math.PI}},y=function(e,t){return{vx:t*Math.cos(e*Math.PI/180),vy:t*Math.sin(e*Math.PI/180)}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;return~~((180-2*((arguments.length>1&&void 0!==arguments[1]?arguments[1]:150)-e))/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:5))},b=function(e,t){return e.slice(0,t+1).reduce(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+(arguments.length>1?arguments[1]:void 0)},0)},w=function(e){for(var t=100*e.reduce(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+(arguments.length>1?arguments[1]:void 0)},0),n=Math.round(Math.random()*t)/100,i=0;i<e.length;i++)if(n>=b(e,i-1)&&n<b(e,i))return i},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=Math.round(100*Math.random())/100;return t>=0&&t<=e},P=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=360/n,o=[],r=0;r<n;r++)o[r]={x:e.x+Math.cos(i*r*Math.PI/180)*t,y:e.y+Math.sin(i*r*Math.PI/180)*t};return o};function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return(S="function"==typeof Symbol&&"symbol"===k(Symbol.iterator)?function(e){return k(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":k(e)})(e)}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function I(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){T(e,t,n[t])})}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function L(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}var U={useBlink:!1,blinkNow:!1,blinkCount:0,blinkMax:30,blinkInterval:5},F=function(){function e(t){var n=t.id,i=void 0===n?"basicObj":n,o=t.cloneId,r=void 0===o?0:o,a=t.type,s=void 0===a?"normal":a,c=t.health,l=void 0===c?3:c,h=t.x,f=void 0===h?0:h,d=t.y,m=void 0===d?0:d,v=t.width,p=void 0===v?100:v,y=t.height,g=void 0===y?100:y,b=t.rotate,w=void 0===b?0:b,x=t.zoomRatio,P=void 0===x?1:x,k=t.fillStyle,S=void 0===k?"#111":k,O=t.strokeStyle,E=void 0===O?"#fff":O,I=t.opacity,j=void 0===I?1:I,B=t.collideObjs,C=void 0===B?[]:B,N=t.movement,A=void 0===N?null:N,T=t.useWall,G=void 0!==T&&T,L=t.hitbox,F=void 0===L?null:L;M(this,e),this.id=i,this.cloneId=r,this.type=s,this.health=l,this.zoomRatio=P,this.x=f,this.y=m,this.width=p*this.zoomRatio,this.height=g*this.zoomRatio,this.rotate=w,this.dev=!1,this.hitbox=F||{w:this.width,h:this.height},this.hitboxOffset={x:(this.width-this.hitbox.w)/2,y:(this.height-this.hitbox.h)/2},this.spec={x:this.x+this.hitboxOffset.x,y:this.y+this.hitboxOffset.y,w:this.hitbox.w,h:this.hitbox.h},this.movement=A||{isMove:!1,vBasic:6,vx:4,vy:4,ax:0,ay:0},this.newBehavior=[],this.collideObjs=C,this.wall={useWall:G,useBounce:!0,spec:{x:0,y:0,w:u.width,h:u.height}},this.fillStyle=S,this.strokeStyle=E,this.opacity=j,this.blinkSpec=U}return L(e,[{key:"setProp",value:function(e,t){if(this[e]=t,"x"===e||"y"===e||"width"===e||"height"===e){var n=this.spec,i=n.x,o=n.y,r=n.w,a=n.h;"height"===e&&this.updateSpec(i,o,r,t),"width"===e&&this.updateSpec(i,o,t,a),"x"===e&&this.updateSpec(t,o,r,a),"y"===e&&this.updateSpec(i,t,r,a)}return this}},{key:"getWallCollide",value:function(e){this.wall.spec=e}},{key:"wallBounce",value:function(){if(this.wall.useWall){var e=this.wall&&d(this,this.wall);e&&(e.includes("xAxis")&&(this.x<this.wall.spec.w/2?this.setProp("x",this.wall.spec.w-this.width-10):this.setProp("x",1),this.movement=A({},this.movement,{vx:this.wall.useBounce?-1*this.movement.vx:this.movement.vx})),e.includes("yAxis")&&(this.movement=A({},this.movement,{vy:this.wall.useBounce?-1*this.movement.vy:0})))}}},{key:"updateSpec",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.h;this.spec={x:e+this.hitboxOffset.x,y:t+this.hitboxOffset.y,w:n||this.spec.w,h:i||this.spec.h}}},{key:"move",value:function(){var e=this,t=this.movement,n=t.vx,i=t.vy,o=t.ay;if(this.newBehavior.forEach(function(t){return t(e)}),this.movement.isMove){this.wallBounce(),this.useGravity&&(this.movement.vy+=o);var r=this.x+n,a=this.y+i;this.x=r,this.y=a,this.updateSpec(r,a)}}},{key:"blinkEffect",value:function(){var e=this.blinkSpec,t=e.blinkNow,n=e.blinkCount,i=e.blinkMax,o=e.blinkInterval;n<=i?(this.blinkSpec.blinkCount+=1,n%o==0?(this.blinkSpec.blinkNow=!t,this.opacity=1):t||(this.opacity=.5)):this.blinkSpec=U}},{key:"drawOnCanvas",value:function(e){e.save(),e.fillStyle=this.fillStyle,e.strokeStyle=this.strokeStyle,e.fillRect(0,0,this.width,this.height),e.stroke(),e.fill(),e.restore()}},{key:"draw",value:function(e){e.save(),e.beginPath(),e.globalAlpha=this.opacity,e.translate(this.x,this.y),e.rotate(this.rotate*Math.PI/180),this.blinkSpec.useBlink&&this.blinkEffect(e),this.drawOnCanvas(e),e.closePath(),e.restore()}},{key:"render",value:function(e){this.move(),this.draw(e)}}]),e}(),_=function(e){function t(e){var n,i=e.opacity,o=void 0===i?1:i,r=e.imgSrc,a=e.status,s=E(e,["opacity","imgSrc","status"]);return M(this,t),(n=I(this,B(t).call(this,s))).opacity=o,n.statusNow="default",n.status=a||{default:r},n.imgSrc=r,n.image=new Image,n.image.src=n.imgSrc,n}return C(t,F),L(t,[{key:"drawOnCanvas",value:function(e){var t=this.spec,n=(t.x,t.y,t.w),i=t.h,o=this.statusNow,r=this.status[o];this.image.src=r,e.save(),e.drawImage(this.image,0,0,this.width,this.height),this.dev&&e.fillRect(0,0,n,i),e.restore()}}]),t}(),H=function(e){function t(e){var n,i=e.timerAttackFn,o=void 0===i?function(){return console.log("attack")}:i,r=e.attackTime,a=void 0===r?1300:r,s=E(e,["timerAttackFn","attackTime"]);return M(this,t),(n=I(this,B(t).call(this,s))).turnDegNow=0,n.attackTime=a,n.timerAttackInit=function(){return setInterval(function(){o(j(n)),n.statusNow=n.status.attack?"attack":"default",setTimeout(function(){n.statusNow="default"},500)},n.attackTime)},n.timerAttack=n.timerAttackInit(),n}return C(t,_),L(t,[{key:"checkIsAlive",value:function(){this.health<=0&&clearInterval(this.timerAttack)}},{key:"setNewMovement",value:function(e){return this.newBehavior=[].concat(O(this.newBehavior),[e]),this}}]),t}(),R=function(){function e(t){var n=t.id,i=void 0===n?"text":n,o=t.cloneId,r=void 0===o?0:o,a=t.x,s=void 0===a?0:a,c=t.y,l=void 0===c?0:c,u=t.text,h=void 0===u?"default text":u,f=t.textConfig,d=void 0===f?"16px roboto":f,m=t.textAlign,v=void 0===m?"start":m,p=t.width,y=void 0===p?100:p,g=t.height,b=void 0===g?100:g,w=t.fillStyle,x=void 0===w?"#111":w,P=t.strokeStyle,k=void 0===P?"#fff":P,S=t.movement,O=void 0===S?null:S;M(this,e),this.id=i,this.cloneId=r,this.display=!0,this.x=s,this.y=l,this.width=y,this.height=b,this.spec={x:s,y:l,w:this.width,h:this.height},this.text=h,this.textAlign=v,this.textConfig=d,this.fillStyle=x,this.strokeStyle=k,this.movement=O||{isMove:!1,vx:4,vy:4,ax:0,ay:0},this.propsForUpdate=[],this.updateRules=[],this.prevProps={}}return L(e,[{key:"setProp",value:function(e,t){return this[e]=t,this.checkUpdateProp(),this.prevProps[e]=t,this}},{key:"addUpdateRule",value:function(e){return this.updateRules=[].concat(O(this.updateRules),[e]),e(this),this}},{key:"addPropForUpdate",value:function(e){return this.propsForUpdate=[].concat(O(this.propsForUpdate),[e]),this}},{key:"checkUpdateProp",value:function(){for(var e=0;e<this.propsForUpdate.length;e++){var t=this.propsForUpdate[e];if(this[t]!==this.prevProps[t])for(var n=0;n<this.updateRules.length;n++)this.updateRules[n](this)}}},{key:"drawOnCanvas",value:function(e){e.save(),e.font=this.textConfig,e.textAlign=this.textAlign,e.fillStyle=this.fillStyle,e.fillText(this.text,this.x,this.y),e.restore()}},{key:"draw",value:function(e){this.drawOnCanvas(e)}},{key:"render",value:function(e){this.display&&this.draw(e)}}]),e}(),D=function(e){function t(e){var n,i=e.r,o=void 0===i?20:i,r=E(e,["r"]);return M(this,t),(n=I(this,B(t).call(this,r))).r=o,n.width=2*o,n.height=2*o,n.spec=A({},n.spec,{w:n.width,h:n.height}),n}return C(t,F),L(t,[{key:"drawOnCanvas",value:function(e){e.save(),e.fillStyle=this.fillStyle,e.strokeStyle=this.strokeStyle,e.arc(0+this.r,0+this.r,this.r,0,2*Math.PI),e.stroke(),e.fill(),e.restore()}}]),t}(),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new F({x:e,y:t,id:"enemy",cloneId:n,width:60,height:60,fillStyle:"#a90"})},W=function(e){function t(e){var n;return M(this,t),(n=I(this,B(t).call(this,e))).movement=A({},n.movement,{vStandard:6,vx:0,vy:0,ay:.15,moveSet:[]}),n.isInAir=!1,n.useGravity=!0,n.attackType="default",n.noHurt=!1,n.endNoHurt=function(){return setTimeout(function(){n.noHurt=!1},500)},n.timeLimitBuff={buffTime:0,buff:!1},n.checkLimitBuff=setInterval(function(){var e=n.timeLimitBuff,t=e.buffTime,i=e.buff;t>0&&(n.timeLimitBuff.buffTime-=1),i&&0===n.timeLimitBuff.buffTime&&(n.timeLimitBuff.buff=!1,n.attackType="default",n.statusNow="default")},1e3),n.moveEvent(),n}return C(t,_),L(t,[{key:"moveEvent",value:function(){}},{key:"removeKeyCode",value:function(e){var t=e.keyCode,n=this.movement.moveSet;this.movement.moveSet=n.filter(function(e){return e!==t}),0===this.movement.moveSet.length&&(this.movement=A({},this.movement,{vx:0,vy:0}))}},{key:"moveByUser",value:function(e){var t=this,n=e.keyCode;[37,38,39,40,65,87,68,83].includes(n)&&(this.movement.isMove=!0);this.movement.moveSet=function(e,t){return e.includes(t)?e:[].concat(O(e),[t])}(this.movement.moveSet,n);var i=function(e){return t.movement.moveSet.includes(e)};(i(37)||i(65))&&(console.log("left"),this.movement.vx=-1*this.movement.vStandard),(i(39)||i(68))&&(this.movement.vx=1*this.movement.vStandard),(i(38)||i(87))&&(console.log("up"),this.movement.vy=-1*this.movement.vStandard,this.setProp("isInAir",!0)),(i(40)||i(83))&&(console.log("down"),this.movement.vy=1*this.movement.vStandard)}},{key:"collideWithPlatform",value:function(e){this.setProp("movement",A({},this.movement,{vy:0})),this.setProp("y",e-this.height),this.setProp("isInAir",!1)}}]),t}(),q=function(){function e(t){var n=t.groupObjs,i=void 0===n?[]:n,o=t.updateFns,r=void 0===o?[]:o;M(this,e),this.display=!0,this.groupObjs=i,this.updateFns=r}return L(e,[{key:"setProp",value:function(e,t){this[e]=t}},{key:"render",value:function(e){var t=this;this.display&&(this.updateFns.forEach(function(e){e(t)}),this.groupObjs.forEach(function(t){t.render(e)}))}}]),e}(),z=function(){function e(t,n,i){var o=this;M(this,e),this.canvas=t,this.canvasSpec=n,this.ctx=t.getContext("2d"),this.gameNewCloneId=0,this.gameProp=i,this.frame={prev:0,now:0,fps:0},this.FPSInit=setInterval(function(){o.frame.fps=2*(o.frame.now-o.frame.prev),o.frame.prev=o.frame.now},500),this.newGameObjs=[],this.gameEnemies=[],this.spawnEnemyRate=l,this.spawnEnemyInterval=function(){return setInterval(function(){return o.spawnEnemyFn()},o.spawnEnemyRate)},this.spawnEnemy=this.spawnEnemyInterval(),document.addEventListener("keydown",function(e){return o.newGameEvent(e)}),document.addEventListener("keyup",function(e){return o.newGameKeyUpEvent(e)})}return L(e,[{key:"setGameProp",value:function(e,t){this.gameProp=A({},this.gameProp,T({},e,t))}},{key:"drawFPS",value:function(){this.frame.now+=1,this.ctx.font="16px Arial",this.ctx.fillStyle="#000",this.ctx.fillText("fps:"+this.frame.fps,10,20)}},{key:"drawBG",value:function(){this.ctx.save(),this.ctx.globalAlpha=.1,this.ctx.fillStyle="#ddd",this.ctx.fillRect(0,0,this.canvasSpec.width,this.canvasSpec.height),this.ctx.restore()}},{key:"newGameEvent",value:function(e){e.keyCode}},{key:"spawnEnemyFn",value:function(){console.log(this.gameEnemies),this.gameEnemies=[].concat(O(this.gameEnemies),[K(300,300,this.gameNewCloneId).setProp("movement",A({},K().movement,{isMove:!0,vx:3,vy:3}))]),this.gameNewCloneId+=1}},{key:"render",value:function(){this.ctx.clearRect(0,0,this.canvasSpec.width,this.canvasSpec.height),this.ctx.beginPath(),this.drawBG(),this.drawFPS(),requestAnimationFrame(this.render.bind(this))}}]),e}(),V=n(1),Y=n.n(V),J=n(7),$=n.n(J),Q=n(8),X=n.n(Q),Z=n(9),ee=n.n(Z),te=(n(24),n(10)),ne=n.n(te),ie=n(2),oe=n.n(ie),re=n(3),ae=n.n(re),se=n(11),ce=n.n(se),le=n(12),ue=n.n(le),he=n(13),fe=n.n(he),de=n(14),me=n.n(de),ve=n(15),pe=n.n(ve),ye=n(4),ge=n.n(ye),be=n(16),we=n.n(be),xe=n(17),Pe=n.n(xe);function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Oe,Ee,Ie=(Oe=u.width/40+1,Ee=Se(Array(Oe).keys()).map(function(e){return new _({id:"ground",x:40*e,y:u.height-30,width:40,height:128,imgSrc:ce.a,movement:{isMove:!0,vx:-5,vy:0}})}),{position:0,updatePosition:function(){-40===this.position&&(Ee.forEach(function(e){e.x+=40}),this.position=0)},render:function(e){this.updatePosition(),Ee.forEach(function(t){t.render(e)}),this.position-=5}}),je=function(e,t,n){return new _({id:"coin",cloneId:n,x:e,y:t,width:20,height:20,imgSrc:pe.a,movement:{isMove:!0,vx:-4,vy:0}})},Be=function(e){return e<0?[]:Se(Array(e).keys())},Ce=function(e,t){var n=~~(e/2),i=e-2*n,o=Math.ceil(t/2)-n-i;return[].concat(Se(Be(n).map(function(e){return"default"})),Se(Be(i).map(function(e){return"half"})),Se(Be(o).map(function(e){return"none"}))).map(function(e,t){var n=function(e,t,n){var i=new _({id:"playerHeart",cloneId:n,x:e,y:t,width:30,height:30,playerHeartImg:ge.a});return i.status={default:ge.a,half:we.a,none:Pe.a},i}(30+36*t,30,t);return n.statusNow=e,n})},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=new q({groupObjs:Ce(e,t),updateFns:[function(e){e.groupObjs=Ce(e.playerLife,e.lifeLimit)}]});return n.playerLife=e,n.lifeLimit=t,n}();console.log(Ne);var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"enemy",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:80;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0;return new H({x:r,y:a,id:e,cloneId:s,type:"enemy",width:i,height:o,imgSrc:t,movement:n,timerAttackFn:c})}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:700,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"boss",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ae.a,a=arguments.length>6?arguments[6]:void 0,s=new H({x:e,y:t,id:o,cloneId:n,width:400,height:400,imgSrc:r,movement:a,timerAttackFn:i,health:30});return s.status={default:r,attack:oe.a},s.turnDegNow=0,s.setNewMovement(function(e){e.movement.isMove=!0,e.upDown={min:-100,max:400,isDown:!1,basicV:5},e.movement.vx=0,e.y<=e.upDown.min&&!e.upDown.isDown?(e.movement.vx=0,e.movement.vy=1*e.upDown.basicV,e.upDown.isDown=!0):e.y>=e.upDown.max&&(e.movement.vx=0,e.movement.vy=-1*e.upDown.basicV,e.upDown.isDown=!1)})},Me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#222";return new F({id:e,x:t,y:100,width:n,height:i,fillStyle:o})},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=Me("lifeUI_BG",100,e,t,"#ccc"),i=Me("lifeUI_main",100,e,t,"#333"),o=Me("lifeUI_hurt",100+e,0,t,"#c10000"),r=new q({updateFns:[function(t){var n=e*(t.bossHealthNow/t.bossHealthMax),i=e*(t.hurtHealth/t.bossHealthMax),o=t.groupObjs.find(function(e){return"lifeUI_main"===e.id}),r=t.groupObjs.find(function(e){return"lifeUI_hurt"===e.id});o.width=n,r.x=100+n,t.hurtHealth>0&&!t.startHurt?(t.startHurt=!0,r.width=i):r.width<=0?(t.startHurt=!1,t.hurtHealth=0):r.width-=1}],groupObjs:[n,i,o]});return r.bossHealthMax=30,r.bossHealthNow=30,r.hurtHealth=0,r.startHurt=!1,r.display=!1,r}(),Le=[Ae("enemy01",ne.a,{isMove:!0,vx:-3,vy:0},90,60),Ae("enemy02",oe.a,{isMove:!0,vx:-5,vy:0},99,90),Ae("enemy03",ae.a,{isMove:!0,vx:-7,vy:0},90,82)],Ue=function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[.33,.33,.33],r=w(o)||0;return 1===r?Le[r](e,t,n,i).setNewMovement(function(e){var t=e.turnDegNow,n=y(t,2),i=(n.vx,n.vy);e.movement=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){ke(e,t,n[t])})}return e}({},e.movement,{vy:i}),e.turnDegNow+=1.5}):Le[r](e,t,n,i)},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bullet",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new _({id:i,cloneId:n,x:e,y:t,width:60,height:20,imgSrc:X.a,rotate:20,movement:{isMove:!0,vx:o,vy:r}})},_e=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"directive",r=arguments.length>5?arguments[5]:void 0;return new _({id:o,cloneId:i,x:e.x+e.width/2,y:e.y+e.height/2,width:70,height:10,imgSrc:ee.a,rotate:r,movement:{isMove:!0,vx:t,vy:n}})},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new D({id:"bulletEnemy",cloneId:n,x:e,y:t,r:8,fillStyle:"#09a",movement:{isMove:!0,vx:-7,vy:0}})},Re=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new _({id:"obstacle",type:"obs",cloneId:n,x:e,y:t,imgSrc:ue.a,width:250,height:430,rotate:i,zoomRatio:o,movement:{isMove:!0,vx:-3,vy:0}})},De=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new _({id:"buff",type:"spread",cloneId:n,x:e,y:t,imgSrc:fe.a,width:40,height:40,rotate:i,zoomRatio:o,movement:{isMove:!0,vx:-10,vy:0}})},Ke=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new R({x:e,y:t,text:"",fillStyle:n}).setProp(i,o).setProp("basicTxt","".concat(i,": ")).addUpdateRule(function(e){e.text=e.basicTxt+e[i]}).addPropForUpdate(i)},We=Ke(800,20,"#1a0","score",0),qe=Ke(100,20,"#a00","health",10),ze=Ke(900,20,"#111","level",1),Ve=Ke(700,20,"#fa0","coin",0),Ye=Ke(u.width/2,220,"#222","wave","1").setProp("textConfig","30px roboto").setProp("textAlign","center").setProp("display",!1);function Je(){var e=new W({imgSrc:Y.a,x:100,y:300,width:90,height:100,hitbox:{w:50,h:50},status:{default:Y.a,spread:$.a}});return e.useGravity=!1,e.attackFrequency=600,e}Je.prototype.reset=function(){return Je()};var $e,Qe,Xe=new Je;console.log(Xe),console.log(We),window.onload=function(){$e=document.getElementById("UI"),Qe=document.getElementById("gameOver"),console.log($e),console.log(Qe)};var Ze=function(e){document.getElementById("coinNow").innerText=e};function et(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var tt=function(e,t){var n=e.gameProp.level,i=s(n),o=function(t){e.enemyBullets=[].concat(et(e.enemyBullets),[He(t.x,t.y+t.height/2,e.gameNewCloneId)]),e.gameNewCloneId+=1},r={x:e.canvasSpec.width+30,y:Math.round(Math.random()*(e.canvasSpec.height-82))},a="function"==typeof t?t(r.x,r.y,e.gameNewCloneId,o):Ue(r.x,r.y,e.gameNewCloneId,o,i.enemyPercent);e.gameEnemies=[].concat(et(e.gameEnemies),[a]),e.gameNewCloneId+=1};function nt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var it=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xe;Xe.bulletBasicV=10;var i,o,r,a,s,c=function(){e.newGameObjs=[].concat(nt(e.newGameObjs),[t(n.x,n.y+n.height/2,e.gameNewCloneId)])};switch(Xe.attackType){case"default":c(),e.gameNewCloneId+=1;break;case"directive":if(0===e.gameEnemies.length)c();else{var l=e.gameEnemies.filter(function(e){return"obstacle"!==e.id})[0];e.newGameObjs=[].concat(nt(e.newGameObjs),[(i=Xe,o=l,r=Xe.bulletBasicV,s=p(i,o,r),_e(i,s.vx,s.vy,a,"directive",s.deg))]),e.gameNewCloneId+=1}break;case"spread":!function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"enemyBullets",r="left"===n?90:270,a=r+60,s=g(r,a,5),c=0;c<5;c++){var l=a+c*s,u=y(l,t);i[o]=[].concat(nt(i[o]),[_e(e,u.vx,u.vy,i.gameNewCloneId+c,"directive",l)])}console.log(i[o]),i.gameNewCloneId+=5}(Xe,Xe.bulletBasicV,"right",e,"newGameObjs");break;default:c()}e.canShootBullet=!1,setTimeout(function(){e.canShootBullet=!0},Xe.attackFrequency)};function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e){return(rt="function"==typeof Symbol&&"symbol"===ot(Symbol.iterator)?function(e){return ot(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ot(e)})(e)}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){ht(e,t,n[t])})}return e}function st(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var dt={level:0,score:0,coin:0,playerLife:10,playerLifeLimit:10,isNoHurtMode:!1,enemyAmountInThisLevel:0,bossFight:!1,isPause:!1},mt=function(e,t,n){e[t]=[].concat(ft(e.buffItems),[n]),e.gameNewCloneId+=1},vt=function(e){function t(e,n,i){var o,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ct(t).call(this,e,n,i),o=!a||"object"!==rt(a)&&"function"!=typeof a?lt(r):a,ht(lt(o),"eliminateEnemy",function(e){o.removeGameObjs("gameEnemies",e),o.enemyHealthUpdate(e,1e4),o.gameProp.enemyAmountInThisLevel+=1}),ht(lt(o),"removeGameObjs",function(e,t){o[e]=o[e].filter(function(e){return e.cloneId!==t.cloneId})}),ht(lt(o),"enemyHealthUpdate",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.health-t;e.setProp("health",n),"boss"===e.id&&(Ge.setProp("bossHealthNow",n),Ge.setProp("hurtHealth",t),console.log(n,Ge.bossHealthNow)),e.checkIsAlive&&e.checkIsAlive()}),o.enemyBullets=[],o.newGameObjs=[],o.buffItems=[],o.canShootBullet=!0,o.gamePropToSync={},o.spawnObstacle=setInterval(function(){return o.spawnObstacleFn()},3e3),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,z),n=t,(i=[{key:"bossShootBullets",value:function(){var e=this;if(this.gameProp.bossFight){var t=this.gameEnemies.filter(function(e){return"boss"===e.id});if(t.length>0){var n=t[0];console.log(n.attackTime);var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150;console.log(t.y);for(var r=g(90,o,i),a=0;a<i;a++){var s=o+a*r,c=y(s,10);e.enemyBullets=[].concat(ft(e.enemyBullets),[_e(t,c.vx,c.vy,e.gameNewCloneId+a,"directive",s)])}e.gameNewCloneId+=i},o=[function(){var t=p(n,Xe,10);e.enemyBullets=[].concat(ft(e.enemyBullets),[_e(n,t.vx,t.vy,e.gameNewCloneId,"directive",t.deg)]),e.gameNewCloneId+=1},i,function(){var t=p(n,Xe,10),i=_e(n,t.vx,t.vy,e.gameNewCloneId,"missile");i.isMissile=!0,e.enemyBullets=[].concat(ft(e.enemyBullets),[i]),setTimeout(function(){i.isMissile=!1},1e3),e.gameNewCloneId+=1},function(){tt(e,Le[2])},function(){for(var t,i=(t=6,Math.round(Math.random()*t)),o=0;o<6;o++){var r=75*o;o!==i&&(e.enemyBullets=[].concat(ft(e.enemyBullets),[Fe(n.x,r,e.gameNewCloneId+o,"spacingBullet",-5,0)]))}e.gameNewCloneId+=6},function(){for(var t=0;t<7;t++)e.enemyBullets=[].concat(ft(e.enemyBullets),[Fe(260*(t+6),75*t,e.gameNewCloneId+t,"spacingBullet",-5,0)]);e.gameNewCloneId+=7},function(){var t=at({},n),o=i.bind(e,t,6,144);i(),setTimeout(o,500)}],r=w([0,0,0,0,.5,.5,1]);o[r](),console.log(o[r]),clearInterval(n.timerAttack),n.attackTime=[1500,1500,1500,1500,2e3,3500,2500][r],n.timerAttack=n.timerAttackInit()}}}},{key:"newGameKeyUpEvent",value:function(e){Xe.removeKeyCode(e)}},{key:"newGameEvent",value:function(e){32===e.keyCode&&this.canShootBullet&&it(this),Xe.moveByUser(e)}},{key:"spawnObstacleFn",value:function(){var e=(5+~~(6*Math.random()))/10;this.gameEnemies=[].concat(ft(this.gameEnemies),[Re(this.canvasSpec.width+300,this.canvasSpec.height-100,this.gameNewCloneId,0,e)]),this.gameNewCloneId+=1}},{key:"spawnBoss",value:function(){var e=this;Ge.display=!0,Ge.setProp("bossHealthNow",30),this.gameProp.bossFight=!0;this.gameEnemies=[].concat(ft(this.gameEnemies),[Te(700,300,this.gameNewCloneId,function(){e.bossShootBullets()})]),this.gameNewCloneId+=1}},{key:"displayWaveText",value:function(){var e=this;this.updateGameProp("level",this.gameProp.level+1),Ye.setProp("display",!0),pt(this,this.eliminateEnemy),this.gameProp.enemyAmountInThisLevel=0,setTimeout(function(){console.log("timeout"),Ye.setProp("display",!1),e.startGame()},2e3)}},{key:"startGame",value:function(){var e=this;this.gameProp.isPause=!1,this.render(),this.spawnObstacle=setInterval(function(){return e.spawnObstacleFn()},3e3),this.spawnEnemy=this.spawnEnemyInterval()}},{key:"toNextLevel",value:function(){(this.gameProp.level+1)%3==0?this.spawnBoss():this.displayWaveText()}},{key:"spawnEnemyFn",value:function(){var e,t,n,i,o;t=(e=this).gameProp,n=t.level,i=t.bossFight,o=s(n),e.gameProp.enemyAmountInThisLevel>=o.enemyAmount&&!i?e.toNextLevel():i||(console.log(n),tt(e))}},{key:"addPropToSync",value:function(e,t,n){var i=this.gamePropToSync[n]||[];return this.gamePropToSync=at({},this.gamePropToSync,ht({},n,[].concat(ft(i),[{obj:e,objProp:t}]))),this}},{key:"updateGameProp",value:function(e,t){this.gameProp=at({},this.gameProp,ht({},e,t)),this.updatePropByGameProp(e,t)}},{key:"updatePropByGameProp",value:function(e,t){this.gamePropToSync[e].forEach(function(e){e.obj.setProp(e.objProp,t)})}},{key:"restartGame",value:function(){Ge.display=!1,this.updateGameProp("playerLife",10),this.updateGameProp("playerLifeLimit",10),this.updateGameProp("score",0),this.updateGameProp("level",0),this.updateGameProp("coin",0),this.gameProp=dt,pt(this,this.eliminateEnemy),Xe.__proto__.constructor=Xe,console.log(Xe),this.startGame(),console.log(this.gameProp)}},{key:"render",value:function(){var e=this;this.ctx.clearRect(0,0,this.canvasSpec.width,this.canvasSpec.height),this.drawBG(),this.drawFPS();e.gameProp.playerLife<=0&&(e.gameProp.isPause=!0,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;document.getElementById("gameOver").style.display="block",document.getElementById("result").innerText=n;var i=document.getElementById("restartBTN");i.addEventListener("click",function(){e[t]();var n=i.cloneNode(!0);i.parentNode.replaceChild(n,i),document.getElementById("gameOver").style.display="none"})}(e,"restartGame",e.gameProp.score));var t,n,i,o=function(t,n){if(m(t,n)&&!t.noHurt){if(e.gameProp.isNoHurtMode)return;return e.updateGameProp("playerLife",e.gameProp.playerLife-1),t.setProp("blinkSpec",at({},t.blinkSpec,{useBlink:!0})),t.noHurt=!0,t.endNoHurt(),"obs"!==n.type}return!1};this.buffItems.forEach(function(t){if(m(Xe,t)){switch(t.id){case"buff":Xe.attackType=t.type,Xe.statusNow=t.type,Xe.timeLimitBuff.buff="attack",Xe.timeLimitBuff.buffTime=4;break;case"heart":e.updateGameProp("playerLife",e.gameProp.playerLife+1);break;case"coin":e.updateGameProp("coin",e.gameProp.coin+10)}e.removeGameObjs("buffItems",t)}else{if("coin"===t.id){var n=p(t,Xe,12);t.movement.vx=n.vx,t.movement.vy=n.vy}t.render(e.ctx)}}),this.newGameObjs.forEach(function(t){t.x>=e.canvasSpec.width+100?e.removeGameObjs("newGameObjs",t):t.render(e.ctx)}),this.enemyBullets.forEach(function(t){(function(t){return t.x<=-100||t.y<=-100||t.y>=e.canvasSpec.height+100})(t)||o(Xe,t)?e.removeGameObjs("enemyBullets",t):(!function(){for(var t=e.enemyBullets.filter(function(e){return"missile"===e.id}),n=0;n<t.length;n++){var i=t[n];if(i.isMissile){var o=p(i,Xe,i.movement.vBasic||6);i.movement=at({},i.movement,{vx:o.vx,vy:o.vy})}}}(),t.render(e.ctx))}),this.gameEnemies.forEach(function(t){(t.x<=-100||o(Xe,t))&&"boss"!==t.id?e.eliminateEnemy(t):t.render(e.ctx)}),Xe.render(this.ctx),We.render(this.ctx),qe.render(this.ctx),ze.render(this.ctx),Ve.render(this.ctx),Ye.render(this.ctx),Ie.render(this.ctx),Ne.render(this.ctx),Ge.render(this.ctx);for(var r=0;r<this.newGameObjs.length;r++)for(var a=this.newGameObjs[r],s=0;s<this.gameEnemies.length;s++){var c=this.gameEnemies[s];if(m(a,c)){if(c.setProp("blinkSpec",at({},c.blinkSpec,{useBlink:!0})),this.enemyHealthUpdate(c),c.health<=0&&"obs"!==c.type){if(this.removeGameObjs("gameEnemies",c),this.updateGameProp("score",this.gameProp.score+100),"boss"===c.id&&(Ge.display=!1,this.gameProp.bossFight=!1,this.gameProp.isPause=!0,pt(this,this.eliminateEnemy),this.render(),setTimeout(function(){yt(e)},1e3)),"enemy03"===c.id){var l=De(c.x,c.y,this.gameNewCloneId);mt(this,"buffItems",l)}if(x(.1)){var u=(t=c.x,n=c.y,i=this.gameNewCloneId,new _({id:"heart",cloneId:i,x:t,y:n,width:40,height:40,imgSrc:me.a,movement:{isMove:!0,vx:-4,vy:0}}));mt(this,"buffItems",u)}P(c,60,6).forEach(function(t){var n=je(t.x,t.y,e.gameNewCloneId);mt(e,"buffItems",n)})}this.removeGameObjs("newGameObjs",a)}}this.gameProp.isPause||requestAnimationFrame(this.render.bind(this))}}])&&st(n.prototype,i),o&&st(n,o),t}(),pt=function(e,t){e.gameEnemies.forEach(function(e){t(e)}),e.enemyBullets=[],e.newGameObjs=[],e.buffItems=[],e.gameProp.isPause=!0,clearInterval(e.spawnEnemy),clearInterval(e.spawnObstacle)},yt=function(e,t){var n=[50,30,40];!function(e,t,n,i){$e.style.display="block";var o=document.getElementsByClassName("ui-container")[0];for(Ze(i);o.firstChild;)o.removeChild(o.firstChild);for(var r=0;r<c.length;r++){var a=c[r],s=document.createElement("div");s.setAttribute("class","image-container");var l=document.createElement("img");l.setAttribute("src",a);var u=document.createElement("h3");u.textContent="$ ".concat(t[r]),s.appendChild(l),s.appendChild(u),o.appendChild(s)}for(var h=document.getElementsByClassName("image-container"),f=0;f<h.length;f++)h[f].addEventListener("click",e[f]);var d=document.getElementById("continueBTN");d.addEventListener("click",function(){n(),$e.style.display="none";var e=d.cloneNode(!0);d.parentNode.replaceChild(e,d)})}([function(){e.gameProp.playerLifeLimit+=1,e.updateGameProp("playerLife",e.gameProp.playerLifeLimit),e.updateGameProp("playerLifeLimit",e.gameProp.playerLifeLimit),window.alert("Your life limit now is: "+e.gameProp.playerLifeLimit)},function(){Xe.attackFrequency-=100,window.alert("Your attack speed is up!")},function(){Xe.movement.vStandard+=1,window.alert("Your move is faster!")}].map(function(t,i){return function(t,n){return function(){e.gameProp.coin>=t?(e.updateGameProp("coin",e.gameProp.coin-t),n(),Ze(e.gameProp.coin)):window.alert("your coins is not enough~")}}(n[i],t)}),n,function(){e.spawnEnemy=e.spawnEnemyInterval(),e.setGameProp("isPause",!1),e.render(),e.displayWaveText()},e.gameProp.coin)};n(25);function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}a.a.render(o.a.createElement(function(){var e=Object(i.useRef)(),t=Object(i.useRef)(),n=gt(Object(i.useState)("none"),2),r=n[0],a=n[1],s=Object(i.useCallback)(function(t){e.current=t,console.log(e.current)});return Object(i.useEffect)(function(){var n,i;t.current=(n=e.current,(i=new vt(n,u,dt)).addPropToSync(qe,"health","playerLife").addPropToSync(Xe,"health","playerLife").addPropToSync(Ne,"playerLife","playerLife").addPropToSync(Ne,"lifeLimit","playerLifeLimit").addPropToSync(We,"score","score").addPropToSync(ze,"level","level").addPropToSync(Ye,"wave","level").addPropToSync(Ve,"coin","coin"),i),t.current.render(),console.log(t.current)},[]),o.a.createElement("div",{style:{width:u.width,height:u.height,position:"relative"}},o.a.createElement("div",{id:"UI",style:{display:r}},o.a.createElement("button",{onClick:function(){return a("none")}},"Close"),o.a.createElement("h3",{id:"coinNow"}),o.a.createElement("div",{className:"ui-container"}),o.a.createElement("button",{id:"continueBTN"},"CONTINUE")),o.a.createElement("div",{id:"gameOver",style:{display:r}},o.a.createElement("h2",null,"GameOver!"),o.a.createElement("hr",null),o.a.createElement("p",null,o.a.createElement("span",null,"Your result: "),o.a.createElement("span",{id:"result"},"0000")),o.a.createElement("button",{id:"restartBTN"},"Restart!")),o.a.createElement("h3",null,o.a.createElement("span",null,"ui: "),o.a.createElement("span",{id:"uiText"})),o.a.createElement("canvas",{onClick:function(){it(t.current)},style:{boxShadow:"0px 0px 10px #111"},width:u.width,height:u.height,ref:s}),o.a.createElement("div",{id:"controlPanel"},o.a.createElement("div",{id:"dPad"},o.a.createElement("button",{onMouseDown:function(){t.current.newGameEvent({keyCode:38})},onMouseUp:function(){t.current.newGameKeyUpEvent({keyCode:38})},id:"dPadUp"},"UP"),o.a.createElement("button",{onMouseDown:function(){t.current.newGameEvent({keyCode:39})},onMouseUp:function(){t.current.newGameKeyUpEvent({keyCode:39})},id:"dPadRight"},"RIGHT"),o.a.createElement("button",{onMouseDown:function(){t.current.newGameEvent({keyCode:40})},onMouseUp:function(){t.current.newGameKeyUpEvent({keyCode:40})},id:"dPadDown"},"DOWN"),o.a.createElement("button",{onMouseDown:function(){t.current.newGameEvent({keyCode:37})},onMouseUp:function(){t.current.newGameKeyUpEvent({keyCode:37})},id:"dPadLeft"},"LEFT")),o.a.createElement("div",{id:"buttons"},o.a.createElement("button",{onClick:function(){it(t.current)},id:"attackBTN"},"ATK"))))},null),document.getElementById("root"))}]);