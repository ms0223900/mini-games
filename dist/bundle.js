!function(e){function t(t){for(var i,s,a=t[0],l=t[1],c=t[2],u=0,v=[];u<a.length;u++)s=a[u],o[s]&&v.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(h&&h(t);v.length;)v.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={0:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var h=l;r.push([9,1]),n()}([,function(e,t,n){e.exports=n.p+"bea044858f07ed8c497b566c069c2cfb.png"},function(e,t,n){e.exports=n.p+"e268191613e1dbb7f837f40064295774.png"},function(e,t,n){e.exports=n.p+"13f68529537985f6ae506d7059288702.png"},,,function(e,t,n){e.exports=n.p+"d4e3bcbfac8fb77657f7d8edfadc228e.png"},function(e,t,n){e.exports=n.p+"7f456bd9c98b570634e03084b37c93e5.png"},function(e,t,n){e.exports=n.p+"645d57ee3816071ab7a111c0dc94372e.png"},function(e,t,n){e.exports=n(15)},,,,,,function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),r=n(5),s=n.n(r),a=n(1),l=n.n(a);function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=function(e){var t=e.spec,n=t.x,i=t.y,o=t.w;return{t:i,l:n,b:i+t.h,r:n+o}},u=function(e,t){var n=h(e),i=n.t,o=n.l,r=n.b,s=n.r,a=h(t),l=a.t,c=a.l,u=a.b;if(!(o>a.r||s<c||r<l||i>u))return!0},v=function(e,t){var n=[t.x+t.width/2-(e.x+e.width/2),t.y+t.height/2-(e.y+e.height/2)],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/i,n[1]/i]},f=function(e,t,n){return{vx:n*v(e,t)[0],vy:n*v(e,t)[1]}},m=function(e,t){return{vx:t*Math.cos(e*Math.PI/180),vy:t*Math.sin(e*Math.PI/180)}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;return~~((180-2*((arguments.length>1&&void 0!==arguments[1]?arguments[1]:150)-e))/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:5))},d=function(e,t){return e.slice(0,t+1).reduce(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+(arguments.length>1?arguments[1]:void 0)},0)},p=function(e){for(var t=Math.round(100*Math.random())/100,n=0;n<e.length;n++)if(t>=d(e,n-1)&&t<d(e,n))return n},g={width:960,height:540};function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){return(w="function"==typeof Symbol&&"symbol"===b(Symbol.iterator)?function(e){return b(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":b(e)})(e)}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function k(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){C(e,t,n[t])})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),e}var N={useBlink:!1,blinkNow:!1,blinkCount:0,blinkMax:30,blinkInterval:5},T=function(){function e(t){var n=t.id,i=void 0===n?"basicObj":n,o=t.cloneId,r=void 0===o?0:o,s=t.type,a=void 0===s?"normal":s,l=t.health,c=void 0===l?3:l,h=t.x,u=void 0===h?0:h,v=t.y,f=void 0===v?0:v,m=t.width,y=void 0===m?100:m,d=t.height,p=void 0===d?100:d,b=t.rotate,w=void 0===b?0:b,x=t.zoomRatio,S=void 0===x?1:x,k=t.fillStyle,O=void 0===k?"#111":k,P=t.strokeStyle,j=void 0===P?"#fff":P,I=t.opacity,E=void 0===I?1:I,C=t.collideObjs,A=void 0===C?[]:C,M=t.movement,T=void 0===M?null:M,F=t.useWall,R=void 0!==F&&F,G=t.hitbox,_=void 0===G?null:G;B(this,e),this.id=i,this.cloneId=r,this.type=a,this.health=c,this.zoomRatio=S,this.x=u,this.y=f,this.width=y*this.zoomRatio,this.height=p*this.zoomRatio,this.rotate=w,this.dev=!1,this.hitbox=_||{w:this.width,h:this.height},this.hitboxOffset={x:(this.width-this.hitbox.w)/2,y:(this.height-this.hitbox.h)/2},this.spec={x:this.x+this.hitboxOffset.x,y:this.y+this.hitboxOffset.y,w:this.hitbox.w,h:this.hitbox.h},this.movement=T||{isMove:!1,vBasic:6,vx:4,vy:4,ax:0,ay:0},this.newBehavior=[],this.collideObjs=A,this.wall={useWall:R,spec:{x:0,y:0,w:g.width,h:g.height}},this.fillStyle=O,this.strokeStyle=j,this.opacity=E,this.blinkSpec=N}return M(e,[{key:"setProp",value:function(e,t){return this[e]=t,this}},{key:"getWallCollide",value:function(e){this.wall.spec=e}},{key:"wallBounce",value:function(){if(this.wall.useWall){var e=this.wall&&function(e,t){var n=h(e),i=h(t),o=n.l>i.l,r=n.r<i.r,s=n.t>i.t,a=n.b<i.b;if(o&&r&&s&&a)return!1;var l=[];return o&&r||(l=[].concat(c(l),["xAxis"])),s&&a||(l=[].concat(c(l),["yAxis"])),l}(this,this.wall);e&&(e.includes("xAxis")&&(this.movement=E({},this.movement,{vx:-1*this.movement.vx})),e.includes("yAxis")&&(this.movement=E({},this.movement,{vy:-1*this.movement.vy})))}}},{key:"updateSpec",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.h;this.spec={x:e+this.hitboxOffset.x,y:t+this.hitboxOffset.y,w:n||this.spec.w,h:i||this.spec.h}}},{key:"move",value:function(){var e=this;if(this.newBehavior.forEach(function(t){return t(e)}),this.movement.isMove){this.wallBounce();var t=this.x+this.movement.vx,n=this.y+this.movement.vy;this.x=t,this.y=n,this.updateSpec(t,n)}}},{key:"blinkEffect",value:function(){var e=this.blinkSpec,t=e.blinkNow,n=e.blinkCount,i=e.blinkMax,o=e.blinkInterval;n<=i?(this.blinkSpec.blinkCount+=1,n%o==0?(this.blinkSpec.blinkNow=!t,this.opacity=1):t||(this.opacity=.5)):this.blinkSpec=N}},{key:"drawOnCanvas",value:function(e){e.save(),e.fillStyle=this.fillStyle,e.strokeStyle=this.strokeStyle,e.fillRect(this.x,this.y,this.width,this.height),e.stroke(),e.fill(),e.restore()}},{key:"draw",value:function(e){e.save(),e.beginPath(),e.globalAlpha=this.opacity,e.rotate(this.rotate*Math.PI/180),this.blinkSpec.useBlink&&this.blinkEffect(e),this.drawOnCanvas(e),e.closePath(),e.restore()}},{key:"render",value:function(e){this.move(),this.draw(e)}}]),e}(),F=function(e){function t(e){var n,i=e.opacity,o=void 0===i?1:i,r=e.imgSrc,s=(e.status,S(e,["opacity","imgSrc","status"]));return B(this,t),(n=k(this,P(t).call(this,s))).opacity=o,n.statusNow="default",n.status={default:r},n.imgSrc=r,n.image=new Image,n.image.src=n.imgSrc,n}return j(t,T),M(t,[{key:"drawOnCanvas",value:function(e){var t=this.spec,n=t.x,i=t.y,o=t.w,r=t.h,s=this.statusNow,a=this.status[s];this.image.src=a,e.save(),e.drawImage(this.image,this.x,this.y,this.width,this.height),this.dev&&e.fillRect(n,i,o,r),e.restore()}}]),t}(),R=function(e){function t(e){var n,i=e.timerAttackFn,o=void 0===i?function(){return console.log("attack")}:i,r=e.attackTime,s=void 0===r?1300:r,a=S(e,["timerAttackFn","attackTime"]);return B(this,t),(n=k(this,P(t).call(this,a))).timerAttack=setInterval(function(){o(O(n)),n.statusNow=n.status.attack?"attack":"default",setTimeout(function(){n.statusNow="default"},500)},s),n}return j(t,F),M(t,[{key:"checkIsAlive",value:function(){this.health<=0&&clearInterval(this.timerAttack)}},{key:"setNewMovement",value:function(e){return this.newBehavior=[].concat(x(this.newBehavior),[e]),this}}]),t}(),G=function(){function e(t){var n=t.id,i=void 0===n?"text":n,o=t.cloneId,r=void 0===o?0:o,s=t.x,a=void 0===s?0:s,l=t.y,c=void 0===l?0:l,h=t.text,u=void 0===h?"default text":h,v=t.textConfig,f=void 0===v?"16px roboto":v,m=t.width,y=void 0===m?100:m,d=t.height,p=void 0===d?100:d,g=t.fillStyle,b=void 0===g?"#111":g,w=t.strokeStyle,x=void 0===w?"#fff":w,S=t.movement,k=void 0===S?null:S;B(this,e),this.id=i,this.cloneId=r,this.x=a,this.y=c,this.width=y,this.height=p,this.spec={x:a,y:c,w:this.width,h:this.height},this.text=u,this.textConfig=f,this.fillStyle=b,this.strokeStyle=x,this.movement=k||{isMove:!1,vx:4,vy:4,ax:0,ay:0},this.propsForUpdate=[],this.updateRules=[],this.prevProps={}}return M(e,[{key:"setProp",value:function(e,t){return this[e]=t,this.checkUpdateProp(),this.prevProps[e]=t,this}},{key:"addUpdateRule",value:function(e){return this.updateRules=[].concat(x(this.updateRules),[e]),e(this),this}},{key:"addPropForUpdate",value:function(e){return this.propsForUpdate=[].concat(x(this.propsForUpdate),[e]),this}},{key:"checkUpdateProp",value:function(){for(var e=0;e<this.propsForUpdate.length;e++){var t=this.propsForUpdate[e];if(this[t]!==this.prevProps[t])for(var n=0;n<this.updateRules.length;n++)this.updateRules[n](this)}}},{key:"drawOnCanvas",value:function(e){e.save(),e.font=this.textConfig,e.fillStyle=this.fillStyle,e.fillText(this.text,this.x,this.y),e.restore()}},{key:"draw",value:function(e){this.drawOnCanvas(e)}},{key:"render",value:function(e){this.draw(e)}}]),e}(),_=function(e){function t(e){var n,i=e.r,o=void 0===i?20:i,r=S(e,["r"]);return B(this,t),(n=k(this,P(t).call(this,r))).r=o,n.width=2*o,n.height=2*o,n.spec=E({},n.spec,{w:n.width,h:n.height}),n}return j(t,T),M(t,[{key:"drawOnCanvas",value:function(e){e.save(),e.fillStyle=this.fillStyle,e.strokeStyle=this.strokeStyle,e.arc(this.x+this.r,this.y+this.r,this.r,0,2*Math.PI),e.stroke(),e.fill(),e.restore()}}]),t}(),U=new _({x:440,y:40,fillStyle:"#a00"});U.setProp("movement",E({},U.movement,{isMove:!1,vx:-10,vy:10}));var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new T({x:e,y:t,id:"enemy",cloneId:n,width:60,height:60,fillStyle:"#a90"})},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new _({id:"bullet",cloneId:n,x:e,y:t,r:10,fillStyle:"#f010ad",movement:{isMove:!0,vx:10,vy:0}})},z=new G({x:400,y:20,text:"",fillStyle:"#1a0"});z.setProp("score",0).setProp("basicTxt","score: ").addUpdateRule(function(e){e.text=e.basicTxt+e.score}).addPropForUpdate("score"),new G({x:100,y:20,text:"",fillStyle:"#a00"}).setProp("health",10).setProp("basicTxt","health: ").addUpdateRule(function(e){e.text=e.basicTxt+e.health}).addPropForUpdate("health"),console.log(z);var H=function(e){function t(e){var n;return B(this,t),(n=k(this,P(t).call(this,e))).movement=E({},n.movement,{vStandard:4,vx:0,vy:0,moveSet:[]}),n.attackType="default",n.noHurt=!1,n.endNoHurt=function(){return setTimeout(function(){n.noHurt=!1},500)},n.moveEvent(),n}return j(t,F),M(t,[{key:"moveEvent",value:function(){var e=this;document.addEventListener("keyup",function(t){var n=t.keyCode,i=e.movement.moveSet;e.movement.moveSet=i.filter(function(e){return e!==n}),0===e.movement.moveSet.length&&(e.movement=E({},e.movement,{vx:0,vy:0}))})}},{key:"moveByUser",value:function(e){var t=e.keyCode;[37,38,39,40].includes(t)&&(this.movement.isMove=!0);this.movement.moveSet=function(e,t){return e.includes(t)?e:[].concat(x(e),[t])}(this.movement.moveSet,t),console.log(this.movement.moveSet),this.movement.moveSet.includes(37)?(this.movement.vy=0,this.movement.vx=-1*this.movement.vStandard):this.movement.moveSet.includes(38)?(this.movement.vx=0,this.movement.vy=-1*this.movement.vStandard):this.movement.moveSet.includes(39)?(this.movement.vy=0,this.movement.vx=1*this.movement.vStandard):this.movement.moveSet.includes(40)&&(this.movement.vx=0,this.movement.vy=1*this.movement.vStandard)}}]),t}(),V=new H({imgSrc:l.a,x:100,y:100,w:200,h:200}),W=function(){function e(t,n,i){var o=this;B(this,e),this.canvas=t,this.canvasSpec=n,this.ctx=t.getContext("2d"),this.gameNewCloneId=0,this.gameProp=i,this.frame={prev:0,now:0,fps:0},this.FPSInit=setInterval(function(){o.frame.fps=2*(o.frame.now-o.frame.prev),o.frame.prev=o.frame.now},500),this.newGameObjs=[],this.gameEnemies=[],this.spawnEnemyRate=500,this.spawnEnemy=setInterval(function(){return o.spawnEnemyFn()},this.spawnEnemyRate),document.addEventListener("keydown",function(e){return o.newGameEvent(e)})}return M(e,[{key:"setGameProp",value:function(e,t){this.gameProp=E({},this.gameProp,C({},e,t))}},{key:"drawFPS",value:function(){this.frame.now+=1,this.ctx.font="16px Arial",this.ctx.fillStyle="#000",this.ctx.fillText("fps:"+this.frame.fps,10,20)}},{key:"drawBG",value:function(){this.ctx.save(),this.ctx.globalAlpha=.1,this.ctx.fillStyle="#ddd",this.ctx.fillRect(0,0,this.canvasSpec.width,this.canvasSpec.height),this.ctx.restore()}},{key:"newGameEvent",value:function(e){32===e.keyCode&&(this.newGameObjs=[].concat(x(this.newGameObjs),[L(V.x,V.y+V.height/2,this.gameNewCloneId)]),this.gameNewCloneId+=1,console.log(this.newGameObjs))}},{key:"spawnEnemyFn",value:function(){console.log(this.gameEnemies),this.gameEnemies=[].concat(x(this.gameEnemies),[D(300,300,this.gameNewCloneId).setProp("movement",E({},D().movement,{isMove:!0,vx:3,vy:3}))]),this.gameNewCloneId+=1}},{key:"render",value:function(){this.ctx.clearRect(0,0,this.canvasSpec.width,this.canvasSpec.height),this.ctx.beginPath(),this.drawBG(),this.drawFPS(),requestAnimationFrame(this.render.bind(this))}}]),e}(),q=n(6),J=n.n(q),K=n(2),Q=n.n(K),X=n(3),Y=n.n(X),Z=n(7),$=n.n(Z),ee=n(8),te=n.n(ee);function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=new _({x:440,y:40,fillStyle:"#a00"});ie.setProp("movement",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){ne(e,t,n[t])})}return e}({},ie.movement,{isMove:!1,vx:-10,vy:10}));var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"enemy",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;return new R({x:i,y:o,id:e,cloneId:r,width:80,height:80,imgSrc:t,useWall:!1,movement:n,timerAttackFn:s})}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:700,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"boss",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Y.a,s=arguments.length>6?arguments[6]:void 0,a=new R({x:e,y:t,id:o,cloneId:n,width:400,height:400,imgSrc:r,useWall:!1,movement:s,timerAttackFn:i,health:20});return a.status={default:r,attack:Q.a},a.setNewMovement(function(e){e.movement.isMove=!0,e.upDown={min:-100,max:400,isDown:!1,basicV:5},e.movement.vx=0,e.y<=e.upDown.min&&!e.upDown.isDown?(e.movement.vx=0,e.movement.vy=1*e.upDown.basicV,e.upDown.isDown=!0):e.y>=e.upDown.max&&(e.movement.vx=0,e.movement.vy=-1*e.upDown.basicV,e.upDown.isDown=!1)})},se=oe("enemy01",J.a,{isMove:!0,vx:-3,vy:0}),ae=oe("enemy02",Q.a,{isMove:!0,vx:-5,vy:0}),le=oe("enemy03",Y.a,{isMove:!0,vx:-7,vy:0}),ce=function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[.33,.33,.33];return[se,ae,le][p(o)||0](e,t,n,i)},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bullet";return new _({id:i,cloneId:n,x:e,y:t,r:10,fillStyle:"#f010ad",movement:{isMove:!0,vx:10,vy:0}})},ue=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"directive";return new _({id:o,cloneId:i,x:e.x+e.width/2,y:e.y+e.height/2,r:10,fillStyle:"missile"===o?"#00a":"#0a0",movement:{isMove:!0,vx:t,vy:n}})},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new _({id:"bulletEnemy",cloneId:n,x:e,y:t,r:8,fillStyle:"#09a",movement:{isMove:!0,vx:-7,vy:0}})},fe=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new F({id:"obstacle",type:"obs",cloneId:n,x:e,y:t,imgSrc:$.a,width:250,height:430,rotate:i,zoomRatio:o,movement:{isMove:!0,vx:-3,vy:0}})},me=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new F({id:"buff",type:"spread",cloneId:n,x:e,y:t,imgSrc:te.a,width:40,height:40,rotate:i,zoomRatio:o,movement:{isMove:!0,vx:-10,vy:0}})},ye=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new G({x:e,y:t,text:"",fillStyle:n}).setProp(i,o).setProp("basicTxt","".concat(i,": ")).addUpdateRule(function(e){e.text=e.basicTxt+e[i]}).addPropForUpdate(i)},de=ye(800,20,"#1a0","score",0),pe=ye(100,20,"#a00","health",10),ge=ye(900,20,"#111","level",1),be=new H({imgSrc:l.a,x:100,y:100,width:100,height:100,hitbox:{w:50,h:50}});console.log(de);var we=[{level:1,enemyAmount:10,enemyPercent:[.7,.2,.1]},{level:2,enemyAmount:14,enemyPercent:[.6,.3,.1]},{level:3,enemyAmount:20,enemyPercent:[.5,.35,.15]},{level:4,enemyAmount:30,enemyPercent:[.1,.1,.8]}];function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e){return(Se="function"==typeof Symbol&&"symbol"===xe(Symbol.iterator)?function(e){return xe(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":xe(e)})(e)}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Oe(e,t,n[t])})}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function je(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Be=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=je(this,Ie(t).call(this,e,n,i))).enemyBullets=[],o.newGameObjs=[],o.buffItems=[],o.canShootBullet=!0,o.spawnObstacle=setInterval(function(){return o.spawnObstacleFn()},3e3),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,W),n=t,(i=[{key:"shootBullet",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be;be.bulletBasicV=10;var i,o,r,s,a,l=function(){e.newGameObjs=[].concat(Ce(e.newGameObjs),[t(n.x,n.y+n.height/2,e.gameNewCloneId)])};switch(be.attackType){case"default":l(),this.gameNewCloneId+=1;break;case"directive":if(0===this.gameEnemies.length)l();else{var c=this.gameEnemies.filter(function(e){return"obstacle"!==e.id})[0];this.newGameObjs=[].concat(Ce(this.newGameObjs),[(i=be,o=c,r=be.bulletBasicV,a=f(i,o,r),ue(i,a.vx,a.vy,s))]),this.gameNewCloneId+=1}break;case"spread":!function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"enemyBullets",r="left"===n?90:270,s=r+60,a=y(r,s,5),l=0;l<5;l++){var c=m(s+l*a,t);i[o]=[].concat(Ce(i[o]),[ue(e,c.vx,c.vy,i.gameNewCloneId+l+1)])}console.log(i[o]),i.gameNewCloneId+=5}(be,be.bulletBasicV,"right",this,"newGameObjs");break;default:l()}this.canShootBullet=!1,setTimeout(function(){e.canShootBullet=!0},300),console.log(this.newGameObjs)}},{key:"bossShootBullets",value:function(){var e=this;if(this.gameProp.bossFight){var t=this.gameEnemies.filter(function(e){return"boss"===e.id});if(t.length>0){var n=t[0];[function(){var t=f(n,be,10);e.enemyBullets=[].concat(Ce(e.enemyBullets),[ue(n,t.vx,t.vy,e.gameNewCloneId)]),e.gameNewCloneId+=1},function(){for(var t=y(90,150,5),i=0;i<5;i++){var o=m(150+i*t,10);e.enemyBullets=[].concat(Ce(e.enemyBullets),[ue(n,o.vx,o.vy,e.gameNewCloneId+i+1)])}console.log(e.enemyBullets),e.gameNewCloneId+=5},function(){var t=f(n,be,10),i=ue(n,t.vx,t.vy,e.gameNewCloneId,"missile");i.isMissile=!0,e.enemyBullets=[].concat(Ce(e.enemyBullets),[i]),setTimeout(function(){i.isMissile=!1},1e3),e.gameNewCloneId+=1}][p([.2,.1,.7])]()}}}},{key:"newGameEvent",value:function(e){32===e.keyCode&&this.canShootBullet&&this.shootBullet(),be.moveByUser(e)}},{key:"spawnObstacleFn",value:function(){var e=(5+~~(6*Math.random()))/10;this.gameEnemies=[].concat(Ce(this.gameEnemies),[fe(this.canvasSpec.width+300,this.canvasSpec.height-100,this.gameNewCloneId,0,e)]),this.gameNewCloneId+=1}},{key:"spawnBoss",value:function(){var e=this;this.gameProp.bossFight=!0;this.gameEnemies=[].concat(Ce(this.gameEnemies),[re(700,300,this.gameNewCloneId,function(){e.bossShootBullets()})]),console.log(this.gameEnemies),this.gameNewCloneId+=1}},{key:"spawnEnemyFn",value:function(){var e=this,t=this.gameProp.level,n=we[t];if(t<we.length-1&&this.gameProp.enemyAmountInThisLevel>=n.enemyAmount)this.gameProp.level+=1,ge.setProp("level",we[this.gameProp.level].level),this.gameProp.enemyAmountInThisLevel=0,this.spawnBoss();else if(!this.gameProp.bossFight){console.log(t);console.log(this.gameEnemies);var i={x:this.canvasSpec.width+30,y:Math.round(Math.random()*(this.canvasSpec.height-82))};this.gameEnemies=[].concat(Ce(this.gameEnemies),[ce(i.x,i.y,this.gameNewCloneId,function(t){e.enemyBullets=[].concat(Ce(e.enemyBullets),[ve(t.x,t.y+t.height/2,e.gameNewCloneId)]),e.gameNewCloneId+=1},n.enemyPercent)]),this.gameProp.enemyAmountInThisLevel+=1,this.gameNewCloneId+=1}}},{key:"render",value:function(){var e=this;this.ctx.clearRect(0,0,this.canvasSpec.width,this.canvasSpec.height),this.drawBG(),this.drawFPS();var t=function(t,n){e[t]=e[t].filter(function(e){return e.cloneId!==n.cloneId})},n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e.setProp("health",e.health-t),e.checkIsAlive&&e.checkIsAlive()},i=function(t,n){return!(!u(t,n)||t.noHurt)&&(console.log("hit!"),e.gameProp=ke({},e.gameProp,{playerLife:e.gameProp.playerLife-1}),t.setProp("blinkSpec",ke({},t.blinkSpec,{useBlink:!0})),pe.setProp("health",e.gameProp.playerLife),t.setProp("health",e.gameProp.playerLife),t.noHurt=!0,t.endNoHurt(),"obs"!==n.type)};this.buffItems.forEach(function(n){u(be,n)?(be.attackType=n.type,t("buffItems",n)):n.render(e.ctx)}),this.newGameObjs.forEach(function(n){n.x>=e.canvasSpec.width+100?t("newGameObjs",n):n.render(e.ctx)}),this.enemyBullets.forEach(function(n){(function(t){return t.x<=-100||t.x>=e.canvasSpec.width+100||t.y<=-100||t.y>=e.canvasSpec.height+100})(n)||i(be,n)?t("enemyBullets",n):(!function(){for(var t=e.enemyBullets.filter(function(e){return"missile"===e.id}),n=0;n<t.length;n++){var i=t[n];if(i.isMissile){var o=f(i,be,i.movement.vBasic||6);i.movement=ke({},i.movement,{vx:o.vx,vy:o.vy})}}}(),n.render(e.ctx))}),this.gameEnemies.forEach(function(o){(o.x<=-100||i(be,o))&&"boss"!==o.id?(t("gameEnemies",o),n(o,1e4)):o.render(e.ctx)}),be.render(this.ctx),de.render(this.ctx),pe.render(this.ctx),ge.render(this.ctx);for(var o=0;o<this.newGameObjs.length;o++)for(var r=this.newGameObjs[o],s=0;s<this.gameEnemies.length;s++){var a=this.gameEnemies[s];u(r,a)&&(a.setProp("blinkSpec",ke({},a.blinkSpec,{useBlink:!0})),n(a),a.health<=0&&"obs"!==a.type&&(t("gameEnemies",a),this.gameProp=ke({},this.gameProp,{score:"number"==typeof this.gameProp.score?this.gameProp.score+100:0}),de.setProp("score",this.gameProp.score),"boss"===a.id&&(this.gameProp.bossFight=!1),"enemy03"===a.id&&(this.buffItems=[].concat(Ce(this.buffItems),[me(a.x,a.y,this.gameNewCloneId)]),this.gameNewCloneId+=1)),t("newGameObjs",r))}requestAnimationFrame(this.render.bind(this))}}])&&Pe(n.prototype,i),o&&Pe(n,o),t}(),Ae={level:0,score:0,playerLife:10,enemyAmountInThisLevel:0,bossFight:!1};s.a.render(o.a.createElement(function(){var e=Object(i.useRef)(),t=Object(i.useRef)(),n=Object(i.useCallback)(function(t){e.current=t,console.log(e.current)});return Object(i.useEffect)(function(){t.current=function(e,t){return new Be(e,t,Ae)}(e.current,g),t.current.render(),console.log(t.current)},[]),o.a.createElement("div",null,o.a.createElement("canvas",{style:{boxShadow:"0px 0px 10px #111"},width:g.width,height:g.height,ref:n}))},null),document.getElementById("root"))}]);